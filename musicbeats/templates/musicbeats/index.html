{%extends 'musicbeats/basic.html'%}
{% block title%}Soundory{% endblock %}
{% block body %}
    {% load static %} 
    <!-- üí° CSS Styling -->
<style>
  .card-hover:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    transition: all 0.3s ease-in-out;
  }

  .tag-badge {
    background: linear-gradient(to right, #11998e, #38ef7d);
    color: white;
    padding: 3px 10px;
    border-radius: 50px;
    font-size: 0.75rem;
  }

  .section-title {
    padding-left: 7%;
    font-family: 'Segoe UI', sans-serif;
    font-weight: bold;
    font-size: 1.8rem;
    color: #222;
  }

  .hero-subtitle {
    font-size: 1.4rem;
    font-style: italic;
    color: #bbb;
  }

  .scroll-x::-webkit-scrollbar {
    height: 8px;
  }

  .scroll-x::-webkit-scrollbar-thumb {
    background: #1DB954;
    border-radius: 10px;
  }

  @keyframes shake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(10deg); }
    50% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }

  .shake {
    display: inline-block;
    animation: shake 0.6s ease-in-out infinite;
  }
  .shake-on-hover:hover {
    animation: shake 0.6s ease-in-out;
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1); }
    50% {
      transform: scale(1.1); }
  }
  
  .pulse {
    display: inline-block;
    animation: pulse 1.5s ease-in-out infinite;
  }
  
</style>


<!-- üéµ HERO SECTION -->
<div class="hero-section text-white" style="
    background: linear-gradient(160deg, #0f0c29, #302b63, #24243e);
    padding: 100px 20px;
    text-align: center;
    border-radius: 0 0 40px 40px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);">
  <div class="container">
    
    <h1 class="display-3 fw-bold mb-3" style="font-family: 'Segoe UI', sans-serif;">
      <span class="shake">üéµ</span> Welcome to <span style="color: #1DB954;">Soundory</span>
    </h1>
    <p class="hero-subtitle mb-4">Music. Reimagined with Soundory.</p>

    <!-- üîç Search Bar -->
    <form method="GET" action="/musicbeats/search" class="d-flex justify-content-center mt-3">
      <input name="query" class="form-control w-50 rounded-start-pill mr-2" type="search" placeholder="What do you want to play?" aria-label="Search" style="width:500px; border-radius:25px;">
      <button class="btn btn-success rounded-end-pill px-4" type="submit">Search</button>
    </form>
  </div>
</div>

<!-- üî• TRENDING SONGS -->
<h2 class="section-title mt-5 mb-3"><img src="/media/images/Music Logo.png/" width=100px;> Trending Songs</h2>

<div class="container-fluid px-5">
  <div class="d-flex flex-row overflow-auto pb-3 scroll-x" style="gap: 20px; scroll-snap-type: x mandatory;">
    {% for i in song %}
    <div class="card card-hover flex-shrink-0 shadow" style="width: 250px; border-radius: 15px; scroll-snap-align: start;">
      <img src="/media/{{i.image}}" class="card-img-top"
        style="height: 200px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <div class="card-body bg-light" style="border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
        <h5 class="card-title">{{ i.name }}</h5>
        <p><span class="tag-badge">{{ i.tags }}</span></p>
        <p class="card-text">üé¨ {{ i.movie }}</p>
        <a href="/musicbeats/songs/{{i.song_id}}" class="btn btn-outline-success w-100"><span class="shake-on-hover" style="display:inline-block;">üéß</span> Listen Song</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<hr>
<!-- üéµ Explore All Podcasts -->
<h2 class="section-title mt-5 mb-3">
  <img src="/media/images/Music Logo.png/" width="100px"> Podcasts
</h2>

<div class="container-fluid px-5">
  <div class="d-flex flex-row overflow-auto pb-3 scroll-x" style="gap: 25px; scroll-snap-type: x mandatory;">
    {% for podcast in podcasts|slice:":3" %}
    <div class="card podcast-card flex-shrink-0 shadow-lg"
         style="width: 300px; border-radius: 20px; scroll-snap-align: start;">
      
      <!-- Podcast Image -->
      <img src="/media/{{ podcast.image }}" 
           class="card-img-top"
           style="height: 180px; object-fit: cover; border-radius: 20px 20px 0 0;">
      
      <!-- Podcast Body -->
      <div class="card-body text-black" style="backdrop-filter: blur(12px); border-radius: 0 0 20px 20px;">
        <h5 class="card-title text-truncate fw-bold" title="{{ podcast.title }}">{{ podcast.title }}</h5>
        <p class="card-text small">{{ podcast.description|truncatechars:80 }}</p>

        <!-- Audio Player -->
        <audio controls class="w-100 mb-2" style="border-radius: 10px;">
          <source src="/media/{{ podcast.audio }}" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>

        <!-- Buttons -->
        <div class="d-flex justify-content-between">
          <a href="/media/{{ podcast.audio }}" download class="btn btn-success btn-sm w-50 me-2 mr-2 text-black">‚¨áÔ∏è Download</a>
          <a href="/media/{{ podcast.audio }}" class="btn btn-success btn-sm w-50">‚ñ∂Ô∏è Play</a>
        </div>
        <p class="mt-2 mb-0 small">üéôÔ∏è {{ podcast.creator }}</p>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<style>
  .podcast-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .podcast-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0px 10px 25px rgba(0,0,0,0.3);
  }
</style>

<!-- üéß YOUR PLAYLIST -->
<h3 class="section-title mt-5 mb-3"><span class="shake">üéß</span> Your Playlist Songs</h3>

<div class="container-fluid px-5">
  <div class="d-flex flex-row overflow-auto pb-3 scroll-x" style="gap: 20px; scroll-snap-type: x mandatory;">
    {% for i in watch reversed %}
    <div class="card card-hover flex-shrink-0 shadow" style="width: 250px; border-radius: 15px; scroll-snap-align: start;">
      <img src="/media/{{i.image}}" class="card-img-top"
        style="height: 200px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <div class="card-body bg-light" style="border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
        <h5 class="card-title">{{ i.name }}</h5>
        <p><span class="tag-badge">{{ i.tags }}</span></p>
        <p class="card-text">üé¨ {{ i.movie }}</p>
        <a href="/musicbeats/songs/{{i.song_id}}" class="btn btn-outline-success w-100"><span class="shake-on-hover" style="display:inline-block;">üéß</span> Listen Song</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<hr>

<!-- ‚ù§Ô∏è LIKED SONGS -->
<h3 class="section-title mt-5 mb-3"><span class="pulse">‚ù§Ô∏è</span> Your Liked Songs</h3>

<div class="container-fluid px-5">
  <div class="d-flex flex-row overflow-auto pb-3 scroll-x" style="gap: 20px; scroll-snap-type: x mandatory;">
    {% for i in user_likes reversed %}
    <div class="card card-hover flex-shrink-0 shadow" style="width: 250px; border-radius: 15px; scroll-snap-align: start;">
      <img src="/media/{{i.image}}" class="card-img-top"
        style="height: 200px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <div class="card-body bg-light" style="border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
        <h5 class="card-title">{{ i.name }}</h5>
        <p><span class="tag-badge">{{ i.tags }}</span></p>
        <p class="card-text">üé¨ {{ i.movie }}</p>
        <a href="/musicbeats/songs/{{i.song_id}}" class="btn btn-outline-success w-100"><span class="shake-on-hover" style="display:inline-block;">üéß</span> Listen Song</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>


{% endblock %}

 
 
 